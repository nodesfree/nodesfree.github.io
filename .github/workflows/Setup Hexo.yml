name: Setup Hexo Environment

# 触发工作流的事件
on:
  push:
    branches:
      - main
  # 也可以添加手动触发，方便测试
  workflow_dispatch:

# 定义一个构建任务
jobs:
  setup_environment:
    # 运行在最新的 Ubuntu 环境上
    runs-on: ubuntu-latest
    
    # 定义步骤
    steps:
      # 1. 检查 Git 是否预安装 (可选验证步骤)
      - name: Verify Git Installation
        run: git --version
        # 结果会显示 Git 版本，证明它已经可用

      # 2. 设置 Node.js 环境
      # 这一步会自动安装和配置指定版本的 Node.js
      - name: Setup Node.js (Install Node.js)
        uses: actions/setup-node@v4
        with:
          node-version: '20' # 设置你需要的 Node.js 版本 (推荐LTS)
          cache: 'npm'       # 启用 npm 缓存，加快依赖安装速度

      # 3. 验证 Node.js 和 npm 是否安装成功
      - name: Verify Node.js and npm Installation
        run: |
          node -v
          npm -v

      # 4. 全局安装 Hexo 命令行工具 (Install Hexo)
      - name: Install Hexo CLI
        run: npm install -g hexo-cli

      # 5. 验证 Hexo 是否安装成功
      - name: Verify Hexo Installation
        run: hexo version
        
      # 6. (可选) 安装项目依赖
      # 如果你有一个现有的 Hexo 项目，需要安装它 package.json 中的依赖
      - name: Checkout Code
        uses: actions/checkout@v4
        
      - name: Install Project Dependencies
        run: npm install
        # 注意: 这一步需要你的仓库中包含 package.json 文件
